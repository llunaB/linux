# 프로세스 이해

## 프로세스란

- 디스크로부터 메모리에 적재된 프로그램 
- 메모리에 적재되어 실행중인 프로그램
- 프로세스는 메모리에 CPU가 코드를 가져가면서 수행을 반복



## 메모리 공간 OS, User

- Kernel Space : 커널이 동작하는 메모리 공간
- User Spacde : app이 동작하는 메모리 공간
- 가상 메모리의 두 구역 : 커널 스페이스 , 유저 스페이스



## CPU, Memory, Dist

- CPU가 요청한 데이터가 캐시에 있다면 HIT
- 없다면 MISS



## 캐시

CPU 안의 작은 메모리 

가장 빠른 SRAM 사용



# 프로세스 관리

## 관리 명령어

- Process State

```bash
ps x
ps aux
```

PID : 프로세스 아이디

TTY : 프로세스용 제어 터미널

TIME : 프로세스의 CPU 사용시간



## STAT

- R : 실행 상태
- S : 수면 상태. 키입력이나 네트워크 패킷을 기다리는 중
- D : 인터럽트 불가능한 수면 상태. 프로세스는 I/O를 기다리는 중
- T : 종료요청을 받았거나 종료 상태
- Z : 좀비상태. 부모프로세스가 정리하지 못한 프로세스. (부모없는 자식) 접근불가함.
- < : 높은 우선 순위의 프로세스
- N : 낮은 우선 순위의 프로세스



> 부모 죽기전에 자식 프로세스 다 죽이고 나오자!!!
>
> 메모리를 할당받았으면 반드시 순차적으로 해제해야 한다.



## aux

- USER : 프소세스 소유자, 사용자 아이디
- %CPU : CPU 사용량
- %MEM : 메모리 사용량
- VSZ : 가상메모리 크기



## Forground, Background Process

- 백그라운드로 만들기

```bash
&
```

- 포그라운드로 가져오기

```bash
fg
```

- 실습

```bash
# test1, test2 파일생성
echo "test1" > test1.txt
echo "test2" > test2.txt
# 명령어 백그라운드 실행
vi ./test1.txt &
vi ./test2.txt &
# 순차적으로 fg 수행
fg
fg
```

- 현재 수행중인 process를 백그라운드로 전환

```bash
# vi 수행하고 ctrl + Z 누르기
```



## 프로세스 죽이기

- 명령어 확인

```bash
kill -l
```

- 프로세스 종료 명령어

```bash
kill -9 [PID]
```



## 특별한 프로세스

## PID 1

>  systemd

- 커널을 초기화하는 동작을 수행(로그인 세션 관리, 장치 관리)
- 부트로더 -> 커널 -> systemd 프로세스
- 커널 부팅 후 첫번째로 실행되는 프로세스



## PID2

> kthreadd

- 커널 공간에서 실행하는 커널 프로세스의 생성 담당
- 모든 커널 스레드의 부모 프로세스



# 실시간 모니터링 유틸리티

## top, htop

- 프로세스 확인
- CPU, RAM



